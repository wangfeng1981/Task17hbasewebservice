google.maps.__gjsload__('drawing_impl', function(_){var p7=function(a,b){function c(f,g,h,k){var l=_.oo("div",a);_.jL(l,"left");l.style.lineHeight="0";g={title:g,dg:h,Eh:k,padding:[4],Vg:!0};h=_.oo("span");h.style.display="inline-block";var m=f||"hand",q=zga[m],r=_.uE(d,h,new _.I(0,q),o7);r.style.position="relative";var u=_.BM(l,h,f,g);_.L.addListener(u,"active_changed",function(){var v=u.get("active")?Aga[m]:q;_.vE(r,o7,new _.I(0,v))});u.bindTo("value",e,"drawingMode")}var d=_.Po("drawing"),e=this;c(null,"\u505c\u6b62\u7ed8\u56fe",!0,!b.length);_.B(b,
function(f,g){var h=Bga[f];h&&c(f,h,!1,g==b.length-1)})},q7=_.n(),r7=function(a,b,c){this.H=a;this.T=b;this.W=c},s7=function(a){if(!a.i){var b={};_.Wc(b,a.get("options"));null==b.zIndex&&(b.zIndex=a.W());delete b.map;a.i=a.H.j(b)}},t7=function(a,b){a.i&&(a.j?(a.i.get("map")||a.i.bindTo("map",a),a.H.i(a.i,a.j,b)):a.H.i(a.i,b))},u7=function(a,b){t7(a,b);b=a.i;b.unbind("map");a.i=null;_.L.trigger(a,"overlaycomplete",{type:a.H.H(),overlay:b});_.L.trigger(a,a.H.o(),b);a.j=null;a.o=!1},v7=_.n(),w7=function(a){this.j=
a;this.i=null},x7=function(a){if(!a.i){var b={};_.Wc(b,a.get("options"));delete b.map;a.i=new _.hg(b)}},y7=function(a,b,c,d){this.o=a;this.j=b;this.H=c;this.T=d+1E-6;this.i=null;this.ka=new _.I(0,0);this.W=new _.I(0,0);this.$=new _.I(0,0)},z7=function(a,b){a.i.Fd.getPath().push(b);a.i.od.set("anchors",[b])},C7=function(a,b){var c=A7(a,b);c?(a.o||2!=c.type||z7(a,c.latLng),B7(a)):z7(a,b)},A7=function(a,b){var c=a.i.Fd.getPath(),d=c.getLength();if(d){var e=a.get("map"),f=e.get("projection");e=e.__gm.get("zoom");
e=a.T/(1<<e);var g=f.fromLatLngToPoint(b,a.ka);b=b.lng();d=c.getAt(d-1);var h=new _.J(d.lat(),_.Yc(d.lng(),b-180,b+180),!0);h=f.fromLatLngToPoint(h,a.W);if(Math.abs(g.x-h.x)<=e&&Math.abs(g.y-h.y)<=e)return{type:1,latLng:d};c=c.getAt(0);b=new _.J(c.lat(),_.Yc(c.lng(),b-180,b+180),!0);a=f.fromLatLngToPoint(b,a.$);if(Math.abs(g.x-a.x)<=e&&Math.abs(g.y-a.y)<=e)return{type:2,latLng:c}}return null},E7=function(a){var b=a.get("options"),c=new _.M;c.setValues(b);var d=new _.GK(c,a.o);c={};_.Wc(c,b);c.strokeColor=
d.get("strokeColor");c.strokeOpacity=d.get("strokeOpacity");c.strokeWeight=d.get("strokeWeight");null==c.zIndex&&(c.zIndex=a.H());delete c.path;delete c.map;var e=new _.Ni(c);e.bindTo("map",a);c.strokeOpacity=d.get("ghostStrokeOpacity");d=new _.DK;d.setValues(c);d.set("anchors",[]);d.bindTo("map",a);var f=null;a.o&&(f={},_.Wc(f,b),f.zIndex=c.zIndex,f.paths=new _.Ue([e.getPath()]),delete f.map,f=new _.Mi(f));a.i={Fd:e,mj:f,od:d};D7(a)},B7=function(a){var b=a.i.Fd;b.unbind("map");var c=a.i.mj;a.i.od.unbind("map");
a.i.od.set("map",null);a.i=null;a.set("draggableCursor",a.j);if(b.getPath().getLength()){if(a.o){b.set("map",null);c.set("map",a.get("map"));var d={type:"polygon",overlay:c};_.L.trigger(a,"overlaycomplete",d);_.L.trigger(a,"polygoncomplete",c)}else d={type:"polyline",overlay:b},_.L.trigger(a,"overlaycomplete",d),_.L.trigger(a,"polylinecomplete",b);D7(a)}else b.set("map",null)},D7=function(a){a.set("enablePanning",!!a.i&&a.get("drawPolysWithDrag")&&!a.get("panWhileDrawing"))},F7=_.n(),Cga=function(a,
b){if(a.lat()<b.lat()){var c=a.lat();var d=b.lat()}else c=b.lat(),d=a.lat();if(180>=_.Ud(a.lng(),b.lng())){var e=a.lng();a=b.lng()}else e=b.lng(),a=a.lng();return _.Yd(c,e,d,a)},Dga=function(){var a=0;return function(){return a++}},G7=function(){var a=this.j=Ega(this);this.Qa=Fga(this);var b="url("+_.Oo+"crosshair.cur)";_.$i.o&&(b+=" 7 7");b+=", crosshair";var c=Dga();this.T=6+(_.ho()?9:0);this.o={circle:new r7(new v7,b,c),marker:new w7(b),polygon:new y7(!0,b,c,this.T),polyline:new y7(!1,b,c,this.T),
rectangle:new r7(new F7,b,c)};b=Gga(this);for(var d in this.o)c=this.o[d],c.bindTo("map",this),c.bindTo("panWhileDrawing",this),c.bindTo("draggingCursor",a),c.bindTo("draggableCursor",b),c.bindTo("enablePanning",a,"panAtEdge"),c.bindTo("options",this,d+"Options"),_.L.forward(c,"overlaycomplete",this),_.L.forward(c,d+"complete",this);this.o.polygon.bindTo("drawPolysWithDrag",this);this.o.polyline.bindTo("drawPolysWithDrag",this);this.i=null;this.Ta=[];this.H=this.W=null;this.ta=0;this.wa=this.ka=null;
this.$=this.ua=void 0},Ega=function(a){var b="click dblclick movestart move moveend panbynow mousewheel mousemove".split(" "),c=new _.BK(b),d=!1;_.B(b,function(e){_.L.addListener(c,e,function(f,g){var h=f instanceof _.Uo,k=h?f.Sa:f;if("click"==e||"dblclick"==e||"mousemove"==e)h?("click"==e&&_.Yo(f),"dblclick"==e&&_.Yo(f),"mousemove"==e&&_.Wo(f)):_.ee(f);if("mousewheel"!=e&&(!d||"mousemove"!=e)){if("mousemove"==e||"move"==e)a.ka=e,a.wa=k,a.ua=g;if(d||!a.get("panWhileDrawing"))"movestart"==e&&(d=!0),
"moveend"==e&&(d=!1),f=_.Pm(),"panbynow"==e?a.ka&&H7(a,a.ka,a.wa,f,a.ua):H7(a,e,k,f,g)}})});return c},Fga=function(a){var b=new _.wz(["map","drawingMode","pegmanDragging"],"active",function(c,d,e){return!!c&&!!d&&!e});b.bindTo("map",a);b.bindTo("drawingMode",a);a.j.bindTo("active",b);return b},Gga=function(a){var b=new _.wz(["draggableCursor","panWhileDrawing"],"cursor",function(c,d){return d?null:c});b.bindTo("panWhileDrawing",a);a.j.bindTo("draggableCursor",b,"cursor");return b},H7=function(a,b,
c,d,e){var f=a.get("map");if(a.i){var g=f.__gm.get("projectionController"),h=f.__gm.get("panes");if(g&&h&&(e=e||c,a.$&&e)){g=a.$.Xc(e);f=_.tn(g,f.getProjection());e=new _.I(e.clientX,e.clientY);(g=(g=a.get("snappingCallback"))&&g(a.i.dh(f)))&&(f=g);g=!1;if("click"==b){if(300>=d-a.ta&&a.H&&_.Zc(a.H.x,e.x,a.T)&&_.Zc(a.H.y,e.y,a.T))return;a.H=e;a.ta=d;g=a.i.Ef(f)}else"dblclick"==b?g=a.i.Vi():"mousemove"==b?g=a.i.Og(f):"movestart"==b?g=a.i.Rg(f):"move"==b?g=a.i.Pg(f):"moveend"==b&&(g=a.i.Qg(f));g&&c&&
_.ee(c)}}},I7=function(a){var b=this;this.Ma=new _.gi(function(){b.i&&(b.j.Yc(b.i),_.ti(b.i),b.i=null,b.o.unbindAll(),b.o=null);b.j=b.get("layoutManager");if(b.j&&0!=b.get("drawingControl")){var d=b.get("drawingControlOptions")||{},e=d.drawingModes||Hga,f=document.createElement("div");_.dz(f);f.style.margin=_.P(5);_.po(f,10);b.i=f;b.o=new p7(b.i,e);b.o.bindTo("drawingMode",b);b.j.addElement(b.i,d.position||1,!1,.25)}},0);var c=new G7;c.bindTo("map",a);c.bindTo("drawingMode",a);c.bindTo("panWhileDrawing",
a);c.bindTo("markerOptions",a);c.bindTo("polygonOptions",a);c.bindTo("polylineOptions",a);c.bindTo("rectangleOptions",a);c.bindTo("circleOptions",a);c.bindTo("drawPolysWithDrag",a);_.L.forward(c,"overlaycomplete",a);_.L.forward(c,"circlecomplete",a);_.L.forward(c,"markercomplete",a);_.L.forward(c,"polygoncomplete",a);_.L.forward(c,"polylinecomplete",a);_.L.forward(c,"rectanglecomplete",a);this.bindTo("map",a);this.bindTo("drawingControl",a);this.bindTo("drawingControlOptions",a);this.bindTo("drawingMode",
a);this.set("snappingCallback",a.get("snappingCallback"));a.bindTo("snappingCallback",this);c.bindTo("snappingCallback",this)},J7=function(a){switch(a){case null:return null;case "Point":return"marker";case "LineString":return"polyline";case "Polygon":return"polygon";default:return null}};_.A(p7,_.M);
var Bga={marker:"\u6dfb\u52a0\u6807\u8bb0",polygon:"\u7ed8\u5236\u5f62\u72b6",polyline:"\u7ed8\u5236\u7ebf\u6761",rectangle:"\u7ed8\u5236\u77e9\u5f62",circle:"\u7ed8\u5236\u5706\u5f62"},o7=new _.yd(16,16),Aga={hand:144,marker:112,polygon:96,polyline:128,rectangle:48,circle:0},zga={hand:80,marker:176,polygon:64,polyline:32,rectangle:16,circle:160};_.A(q7,_.M);_.t=q7.prototype;_.t.Ef=_.p(!1);_.t.Vi=_.p(!1);_.t.Og=_.p(!1);_.t.Rg=_.p(!1);_.t.Pg=_.p(!1);_.t.Qg=_.p(!1);_.A(r7,q7);_.t=r7.prototype;_.t.dh=function(a){s7(this);t7(this,a);return{latLng:a,overlay:this.i}};_.t.active_changed=function(){if(this.get("active"))this.set("draggableCursor",this.T),this.set("draggingCursor","");else{var a=this.i;a&&(a.unbind("map"),a.set("map",null),this.i=null);this.j=null;this.o=!1}};_.t.Ef=function(a){this.j?u7(this,a):(s7(this),this.j=a,t7(this,a),this.o=!0);return!1};_.t.Og=function(a){t7(this,a);return!1};
_.t.Rg=function(a){if(this.o)return!1;this.set("draggingCursor",this.T);this.set("enablePanning",!0);s7(this);this.j=a;t7(this,a);return!0};_.t.Pg=function(a){if(this.o)return!1;t7(this,a);return!0};_.t.Qg=function(a){if(this.o)return!1;this.set("draggingCursor","");this.set("enablePanning",!1);u7(this,a);return!0};v7.prototype.j=function(a){return new _.Ki(a)};v7.prototype.i=function(a,b,c){a.set("center",b);var d=0,e=a.get("map");e&&c&&(d=e.__gm.get("baseMapType"),d=_.Qx(b,c,d&&d.radius));a.set("radius",d)};v7.prototype.H=_.p("circle");v7.prototype.o=_.p("circlecomplete");_.A(w7,q7);w7.prototype.dh=function(a){x7(this);this.i.setPosition(a);return{latLng:a,overlay:this.i}};w7.prototype.active_changed=function(){this.get("active")&&this.set("draggableCursor",this.j)};w7.prototype.Ef=function(a){x7(this);this.i.setPosition(a);this.i.setMap(this.get("map"));_.L.trigger(this,"overlaycomplete",{type:"marker",overlay:this.i});_.L.trigger(this,"markercomplete",this.i);this.i=null;return!1};_.A(y7,q7);_.t=y7.prototype;_.t.dh=function(a){this.i&&this.i.Fd||E7(this);return{latLng:a,overlay:this.i.mj||this.i.Fd}};_.t.active_changed=function(){this.get("active")?this.set("draggableCursor",this.j):this.i&&this.i.Fd&&B7(this)};_.t.Ef=function(a){if(!a)return!1;this.i?C7(this,a):(E7(this),z7(this,a));return!1};_.t.Vi=function(){this.i&&1<this.i.Fd.getPath().getLength()&&B7(this);return!1};
_.t.Og=function(a){var b=a;this.i&&a&&(a=A7(this,a),this.set("draggableCursor",a?"pointer":this.j),a&&(b=a.latLng),this.i.od.set("freeVertexPosition",b));return!1};_.t.Rg=function(a){return a?this.get("drawPolysWithDrag")?(this.i||E7(this),this.i.Fd.getPath().getLength()||z7(this,a),this.set("draggingCursor",this.j),!0):!1:!1};_.t.Pg=function(a){return this.i&&this.get("drawPolysWithDrag")?(this.i.od.set("freeVertexPosition",a),!0):!1};
_.t.Qg=function(a){return a?this.get("drawPolysWithDrag")?(this.i&&(C7(this,a),this.set("draggingCursor","")),this.i&&this.i.od.set("freeVertexPosition",null),!0):!1:!1};_.t.drawPolysWithDrag_changed=y7.prototype.panWhileDrawing_changed=function(){D7(this)};F7.prototype.j=function(a){return new _.Oi(a)};F7.prototype.i=function(a,b,c){a.set("bounds",Cga(b,c||b))};F7.prototype.H=_.p("rectangle");F7.prototype.o=_.p("rectanglecomplete");_.A(G7,_.M);G7.prototype.map_changed=function(){var a=this,b=this.get("map"),c=this.Qa,d=this.j;if(b){var e=b.__gm;e.i.then(function(f){a.$=f.mb});this.bindTo("mouseEventTarget",e);c.bindTo("pegmanDragging",e);d.bindTo("draggable",b);d.bindTo("scrollwheel",b);this.W=_.L.forward(d,"panbynow",e)}else this.unbind("mouseEventTarget"),this.set("mouseEventTarget",null),c.unbind("pegmanDragging"),d.unbind("draggable"),d.unbind("scrollwheel"),this.W&&(_.L.removeListener(this.W),this.W=null)};
G7.prototype.mouseEventTarget_changed=function(){var a=["panes","pixelBounds"],b=this.j;_.B(a,b.unbind,b);b=this.Ta;_.B(b,_.L.removeListener);b.length=0;if(this.get("mouseEventTarget")){b=this.j;var c=this.get("map");_.zy(b,a,c.__gm)}};G7.prototype.drawingMode_changed=function(){this.i&&this.i.set("active",!1);this.j.set("panAtEdge",!1);var a=this.get("drawingMode");(this.i=this.o[a])&&this.i.set("active",!0)};_.A(I7,_.M);I7.prototype.map_changed=function(){var a=this.get("map");a?(a=a.__gm,this.bindTo("layoutManager",a),a.set("snappingCallback",this.get("snappingCallback")),this.bindTo("snappingCallback",a)):(this.unbind("layoutManager"),this.set("layoutManager",null),this.unbind("snappingCallback"))};I7.prototype.layoutManager_changed=function(){_.hi(this.Ma)};I7.prototype.drawingControl_changed=function(){_.hi(this.Ma)};I7.prototype.drawingControlOptions_changed=function(){_.hi(this.Ma)};
var Hga=["marker","polyline","rectangle","circle","polygon"];_.Df("drawing_impl",{ik:I7,Vl:function(a){var b=new _.M,c=new _.wz(["dataDrawingMode"],"drawingManagerMode",J7);c.bindTo("dataDrawingMode",a,"drawingMode");var d=new _.wz(["styleOrStylingFunction"],"style",function(g){return"function"===typeof g?g(new _.Ef):g});d.bindTo("styleOrStylingFunction",a,"style");var e=new _.wz(["controls","controlPosition"],"drawingControlOptions",function(g,h){return{drawingModes:_.$c(g,J7),position:h}});e.bindTo("controls",a);e.bindTo("controlPosition",a);var f=new _.wz(["controls"],
"drawingControl",function(g){return!!g});f.bindTo("controls",a);b.bindTo("map",a);b.bindTo("drawingMode",c,"drawingManagerMode");b.bindTo("markerOptions",d,"style");b.bindTo("polylineOptions",d,"style");b.bindTo("polygonOptions",d,"style");b.bindTo("drawingControlOptions",e);b.bindTo("drawingControl",f);_.L.addListener(b,"overlaycomplete",function(g){g=g.overlay;var h=_.zK([g]),k=a.get("featureFactory");h=k?k(h):new _.Ef({geometry:h});a.add(h);g.set("map",null)});new I7(b);_.L.hb(a,"map_changed",
function(){var g=a.get("map");g&&_.ej(g,"Le")})}});});
